---
title: 'Country Metrics Report'
date: "`r format(Sys.time(), '%Y, %B, %d, %H')`"
output: 'html_document'
params: 
    metric: NA
    variables: NA
    dataset: NA
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
    collapse = TRUE,
    comment = '#>',
    fig.path = './figures/'
)
```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
library(stringr)
```

# Top N report

## Basic metrics selected

```{r, echo=FALSE, warning=FALSE, message=FALSE}
metric <- data.frame(variables = params$variables)
for (i in 1:length(params$metric)) {
    metric[,params$metric[i]] = rep(0, length(params$variables))
    for (j in 1:length(params$variables)) {
        if (params$metric[i] == 'Mean') {
            metric[j,params$metric[i]] = mean(params$dataset[,params$variables[j]])
        } else if (params$metric[i] == 'Median') {
            metric[j,params$metric[i]] = median(params$dataset[,params$variables[j]])
        } else if (params$metric[i] == 'Max') {
            metric[j,params$metric[i]] = max(params$dataset[,params$variables[j]])
        } else if (params$metric[i] == 'Min') {
            metric[j,params$metric[i]] = min(params$dataset[,params$variables[j]])
        }
    }
}
knitr::kable(
    metric,
    booktabs=TRUE,
    longtable=TRUE,
    caption="Basic metrics"
)
```

## Variables selected

```{r, echo=FALSE, warning=FALSE, message=FALSE}
for (i in length(params$variables)) {
    
}
```
